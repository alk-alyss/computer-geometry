\documentclass[draft]{article}

\usepackage[greek]{babel}

\usepackage[a4paper, margin=1.10in]{geometry}

\usepackage{graphicx}
\graphicspath{ {./images} }
\usepackage{amsmath}
\usepackage{subcaption}

\usepackage{fontspec}
\setmainfont{DejaVuSansM Nerd Font}
\setsansfont{DejaVuSansM Nerd Font}

\title{Project 4: Spectral Mesh Processing}
\author{Αλκίνοος Αλυσσανδράκης 1072752}
\date{}

\begin{document}

\maketitle

\vfill
\tableofcontents
\vfill
\newpage

\section{Σκοπός της εργασίας}
Η παρούσα εργασία έχει ως σκοπό την εξερεύνηση μεθόδων για την ανάλυση ενός τρισδιάστατου
μοντέλου με βάση τις συχνοτικές του ιδιότητες και ύστερα την επεξεργασία του
μοντέλου χρησιμοποιώντας τις ιδιότητες αυτές. Στην πρώτη φάση της ανάλυσης θα
χρησιμοποιηθούν τεχνικές όπως η εύρεση του Laplacian Matrix του μοντέλου, η ανάλυση
ιδιοδιανυσμάτων αυτού του πίνακα και η οπτικοποίηση των αποτελεσμάτων, προκειμένου να
βρεθούν και να αναδειχθούν οι συχνοτικές συνιστώσες που αποτελούν το μοντέλο. Ύστερα,
αφού πρώτα προστεθεί τεχνητός θόρυβος στο μοντέλο, θα γίνει εξομάλυνση (smoothing) του
μοντέλου, χρησιμοποιώντας τις συνιστώσες που βρέθηκαν προηγουμένως, με την τεχνική της
αφαίρεσης των υψίσυχνων συνιστωσών του μοντέλου. Τέλος, εκτελώντας την ίδια διαδικασία
ανάλυσης σε πολλά μοντέλα, θα χρησιμοποιηθούν οι χαμηλόσυχνες και υψίσυχνες συνιστώσες
κάθε μοντέλου προκειμένου να βρεθούν μοντέλα με όμοια σχήματα και όμοιες επιφανειακές
λεπτομέρειες αντίστοιχα.

\section{Συχνοτική Ανάλυση}

\subsection{Laplacian Matrix}
Πρώτο βήμα στη συχνοτική ανάλυση ενός μοντέλου είναι η εύρεση του πίνακα Laplace. Πάνω
στον πίνακα αυτό είναι που θα πραγματοποιηθεί ανάλυση ιδιοδιανυσμάτων για να προκύψουν οι
συχνοτικές συνιστώσες. Αυτή η διαδικασία μπορεί να παρομοιαστεί με τον μετασχηματισμό
Fourier που χρησιμοποιείται στην ανάλυση σημάτων, με την έννοια ότι και στις δύο
περιπτώσεις τα δεδομένα μετασχηματίζονται από το το πεδίο του χώρου και του χρόνου
αντίστοιχα, στο πεδίο της συχνότητας

Ο Laplacian Matrix μπορεί να υπολογιστεί με διάφορους τρόπους.
Υπάρχουν δύο βασικές κατηγορίες,
αυτοί που υπολογίζονται με βάση μόνο τη συνδεσιμότητα των κορυφών του μοντέλου,
οι οποίου ονομάζονται συνδυαστικοί (combinatorial),
και αυτοί που στον υπολογισμό τους λαμβάνεται υπ' όψη και η γεωμετρία του μοντέλου,
δηλαδή η θέση των κορυφών και όχι μόνο πως συνδέονται,
οι οποίοι ονομάζονται γεωμετρικοί (geometric).

Σε αυτή την εργασία έχουν χρησιμοποιηθεί δύο μέθοδοι για την εύρεση του Laplacian Matrix
που βρίσκονται και οι δύο στην κατηγορία των combinatorial.
Είναι οι Graph Laplacian Matrix και Tutte Laplacian Matrix

\subsubsection{Graph Laplacian Matrix}
Για τον υπολογισμό του Graph Laplacian χρειάζονται δύο άλλοι πίνακες:
\begin{enumerate}
	\item Adjacency Matrix που ορίζεται ως
		\[
			A_{ij} = \begin{cases}
				1 \quad if \; (i, j) \in E \\
				0 \quad otherwise
			\end{cases}
		\]

		όπου δηλαδή σε για κάθε κορυφή $i, j$ αν υπάρχει ακμή μεταξύ τους
		(αν το ζεύγος $(i,j)$ βρήσκεται στο σύνολο $E$ των ακμών)
		τότε στις θέσεις $[i, j]$ και $[j, i]$ του πίνακα Α τοποθετείται ο αριθμός 1,
		αλλιώς τοποθετείται ο αριθμός 0

	\item Degree Matrix που ορίζεται ως
		\[
			D_{ij} = \begin{cases}
				N(i) \quad if \ i=j \\
				0 \quad otherwise
			\end{cases}
		\]

		όπου $N(i)$ ο αριθμός των κορυφών με τους οποίους γειτονεύει η κορυφή $i$
\end{enumerate}

\noindent
Έχοντας τους δύο συστατικούς πίνακες εν τέλει ο Laplacian πίνακας ορίζεται ως:

\[
	L = D - A
\]

\subsubsection{Tutte Laplacian Matrix}
Ο Tutte Laplacian Matrix ορίζεται παρόμοια με τον Graph Laplacian
λόγω του ότι χρησιμοποιεί και αυτός τους πίνακες Adjacency και Degree,
αλλά ο τελικός τύπος είναι:

\[
	L = D^{-1}A
\]

\subsection{Ανάλυση Ιδιοδιανυσμάτων}
Το επόμενο βήμα στη συχνοτική ανάλυση είναι να πάρουμε τον Laplacian Matrix,
όπως αυτός ορίστηκε πιο πάνω και να εκτελέσουμε σε αυτόν ανάλυση ιδιοδιανυσμάτων.
Δηλαδή θέλουμε να βρούμε τις ιδιοτιμές αυτού του πίνακα και τα αντίστοιχα ιδιοδιανύσματα.

Στη συνέχεια ταξινομούμε αυτά τα ζευγάρια με βάση την ιδιοτιμή σε αύξουσα σειρά,
οπότε λέμε ότι για τις μικρές ιδιοτιμές τα ιδιοδιανύσματα είναι οι χαμηλόσυχνες
συνιστώσες του μοντέλου,
ενώ για τις μεγάλες ιδιοτιμές τα ιδιοδιανύσματα είναι οι υψίσυχνες συνιστώσες του μοντέλου.
Τα πρώτα είναι υπεύθυνα για τον σχηματισμό του γενικότερου σχήματος του μοντέλου
(π.χ. αν το μοντέλο είναι ένα άλογο, τότε από τις χαμηλές ιδιοτιμές σχηματίζονται το
σώμα, το κεφάλι και τα πόδια), ενώ τα δεύτερα είναι υπεύθυνα για τις λεπτομέρειες στην
επιφάνεια του μοντέλου (π.χ. τα ρουθούνια στο κεφάλι του αλόγου,
ή αν είναι αρκετά μεγάλη η ανάλυση, η υφή του δέρματος).

\subsection{Οπτικοποίηση Ιδιοδιανυσμάτων}
Κάθε ιδιοδιάνυσμα που προκύπτει από τη συχνοτική ανάλυση επηρεάζει με διαφορετικό τρόπο
τις κορυφές του μοντέλου. Η επιρροή ενός ιδιοδιανύσματος μπορεί να την οπτικοποιηθεί
χρησιμοποιώντας τις συνιστώσες του. Επειδή το πλήθος των συνιστώσεων είναι ίσο με το
πλήθος των κορυφών του μοντέλου, κάθε συνιστώσα αντιστοιχεί σε μια κορυφή.
Άρα πραγματοποιήται κανονικοποίηση των συνιστωσών, έτσι ώστε όλες οι συνιστώσες να
βρίσκονται στο διάστημα [0,1] και σε κάθε τιμή αντιστοιχίζεται ένα χρώμα
από μια γραμμική κλίμακα χρωμάτων (colour gradient). Το τελικό αποτέλεσμα φαίνεται στα
Σχήματα \ref{fig:vis1} \ref{fig:vis2} για τα χαμηλόσυχνα ιδιοδιανύσματα και στα Σχήματα
\ref{fig:vis3} \ref{fig:vis4} για τα υψίσυχνα ιδιοδιανύσματα.

\begin{figure}[h]
	\begin{subfigure}{0.5\textwidth}
		\includegraphics[width=0.9\linewidth]{"vl_freq.png"}
		\caption{Πολύ χαμηλόσυχνα ιδιοδιανύσματα}
		\label{fig:vis1}
	\end{subfigure}
	\begin{subfigure}{0.5\textwidth}
		\includegraphics[width=0.9\linewidth]{"l_freq.png"}
		\caption{Χαμηλόσυχνα ιδιοδιανύσματα}
		\label{fig:vis2}
	\end{subfigure}
	\begin{subfigure}{0.5\textwidth}
		\includegraphics[width=0.9\linewidth]{"h_freq.png"}
		\caption{Υψίσυχνα ιδιοδιανύσματα}
		\label{fig:vis3}
	\end{subfigure}
	\begin{subfigure}{0.5\textwidth}
		\includegraphics[width=0.9\linewidth]{"vh_freq.png"}
		\caption{Πολύ υψίσυχνα ιδιοδιανύσματα}
		\label{fig:vis4}
	\end{subfigure}
	\caption{Οπτικοποίηση της επιρροής των ιδιοδιανυσμάτων στο μοντέλο}
\end{figure}

Στην οπτικοποίηση των ιδιοδιανυσμάτων παρατηρείται η δημιουργία μοτίβων στα χρώματα.
Μέσω αυτών των μοτίβων αναδυκνύεται η αρμονική συμπεριφορά των ιδιοδιανυσμάτων, αφού τα
χρώματα δεν αλλάχουν απότομα αλλά με ημιτονοειδή τρόπο. Φαίνεται επίσης η αναλογία
των ιδιοδιανυσμάτων με τη συχνότητα, αφού στα πιο χαμηλόσυχνα ιδιοδιανύσματα
τα μοτίβα που δημιουργούνται καλύπτουν μεγάλες περιοχές του μοντέλου, άρα μπορούμε
να πούμε ότι παρουσιάζουν μικρή λεπτομέρεια. Αντιθέτως στα υψίσυχνα ιδιοδιανύσματα τα μοτίβα
καλύπτουν μικρότερες περιοχές, άρα μπορούμε να πούμε ότι παρουσιάζουν μεγάλη λεπτομέρεια.
Η παρατήρηση αυτή ενισχύει το επιχείρημα ότι τα χαμηλόσυχνα ιδιοδιανύσματα ευθύνονται για
το γενικότερο σχήμα του μοντέλου, ενώ τα υψίσυχνα για τις λεπτομέρειες.


\section{Προσθήκη θορύβου}
Για να λειτουργήσει το επόμενο βήμα της εξομάλυνσης του μοντέλου,
είναι απαραίτητο πρώτα να προστεθεί στο μοντέλο κάποιου είδους θορύβου.
Έτσι είναι δυνατόν να γίνει σύγκριση ανάμεσα στο αρχικό μοντέλο,
το θορυβώδες μοντέλο και το τελικό εξομαλυμμένο μοντέλο.

Για τους σκοπούς της εργασίας έχουν χρησιμοποιηθεί δύο αλγόριθμοι
δημιουργίας θορύβου, οι Gaussian noise και Perlin noise.
Σε κάθε περίπτωση το αποτέλεσμα του θορύβου έχει εφαρμοστεί στο
μοντέλο με την εξής διαδικασία για κάθε κορυφή:

\begin{itemize}
	\item Δημιουργία ψευδοτυχαίου αριθμού με βάση κάποιο αλγόριθμο θορύβου
	\item Εύρεση του καθέτου διανύσματος της κορυφής σε σχέση με το υπόλοιπο μοντέλο
	\item Δημιουργία ενός διανύσματος, με βάση την τυχαία τιμή που αντιστοιχεί στην
		κορυφή, παράλληλο στο κάθετο διάνυσμα της κορυφής
	\item Προσθήκη του νέου διανύσματος στο κάθετο διάνυσμα της κορυφής,
		πολλαπλασιασμένο κατά ένα παράγοντα (noise factor),
		που καθορίζει πόσο να επηρεαστεί το μοντέλο από τον θόρυβο
\end{itemize}

Το αποτέλεσμα αυτής της διαδικασίας είναι το μοντέλο να αποκτήσει μια τραχύτητα στην
επιφάνειά του, χωρίς όμως να έχουν προστεθεί παραπάνω κορυφές

\begin{figure}[h]
	\begin{subfigure}{0.5\textwidth}
		\includegraphics[width=0.9\linewidth]{"original_model.png"}
		\caption{Αρχικό μοντέλο}
	\end{subfigure}
	\begin{subfigure}{0.5\textwidth}
		\includegraphics[width=0.9\linewidth]{"gaussian_noise.png"}
		\caption{Μοντέλο με Gaussian Noise}
	\end{subfigure}
	\begin{subfigure}{0.5\textwidth}
		\includegraphics[width=0.9\linewidth]{"perlin_noise.png"}
		\caption{Μοντέλο με Perlin Noise}
	\end{subfigure}
	\caption{Παράδειγμα εφαρμογής Θορύβου σε μοντέλο}
\end{figure}

\section{Εξομάλυνση μοντέλου}
Η βασική ιδέα για την εξομάλυνση του μοντέλου είναι αρκετά απλή. Η τραχύτητα που
προστέθηκε στο μοντέλο με τον θόρυβο επηρεάζει κυρίως τις επιφανειακές λεπτομέρειες
του μοντέλου - τα οποία χαρακτηριστικά επηρεάζονται από τις υψίσυχνες συνιστώσες -
ενώ το βασικό σχήμα παραμένει το ίδιο. Οπότε μπορούμε να χρησιμοποιήσουμε μόνο τα
χαμηλόσυχνα ιδιοδιανύσματα για να μετασχηματίσουμε το μοντέλο στο πεδίο της συχνότητας και
πάλι πίσω στο πεδίο του χώρου. Με αυτόν τον τρόπο εξαλείφουμε την επιρροή των υψίσυχνων
ιδιοδιανυσμάτων και άρα αφαιρούμε τον θόρυβο από το μοντέλο

Ο μετασχηματισμός των κορυφών του μοντέλου γίνεται με τον τύπο

\[
	V' = UU^TV
\]

όπου:
\begin{itemize}
	\item $V$ ο πίνακας με τις αρχικές θέσεις των κορυφών
	\item $V'$ ο πίνακας με τις τελικές θέσεις των κορυφών
	\item $U$ ο πίνακας με τα επιλεγμένα ιδιοδιανύσματα
		(στην προκειμένη περίπτωση τα χαμηλόσυχνα)
\end{itemize}

\begin{figure}[h]
	\begin{subfigure}{0.5\textwidth}
		\includegraphics[width=0.9\linewidth]{"noisy_mesh.png"}
		\caption{Θορυβώδες μοντέλο}
	\end{subfigure}
	\begin{subfigure}{0.5\textwidth}
		\includegraphics[width=0.9\linewidth]{"simplified_mesh.png"}
		\caption{Εξομαλυνμένο μοντέλο (χρήση 250 ιδιοδιανυσμάτων)}
	\end{subfigure}
	\begin{subfigure}{0.5\textwidth}
		\includegraphics[width=0.9\linewidth]{"simplified_mesh.png"}
		\caption{Εξομαλυνμένο μοντέλο (χρήση 1000 ιδιοδιανυσμάτων)}
	\end{subfigure}
	\label{fig:simplify}
	\caption{Παράδειγμα εξομαλυνσης μοντέλου}
\end{figure}

Όπως φαίνεται στο Σχήμα \ref{fig:simplify}, η εξομάλυνση δεν είναι τέλεια
(τουλάχιστον όταν χρησιμοποιούνται λίγα ιδιοδιανύσματα), αλλά βελτιώνεται όσο
περισσότερα ιδιοδιανύσματα χρησιμοποιηθούν.

\section{Εύρεση όμοιων επιστρώσεων}


\section{Εύρεση όμοιων αντικειμένων}

% \begin{figure}[h]
% 	\begin{subfigure}{0.5\textwidth}
% 		\includegraphics[width=0.9\linewidth]{"6.png"}
% 		\caption{Taubin smooting, $\lambda = 0.6, \mu = 0.8$}
% 	\end{subfigure}
% 	\begin{subfigure}{0.5\textwidth}
% 		\includegraphics[width=0.9\linewidth]{"7.png"}
% 		\caption{Taubin smooting, $\lambda = 0.8, \mu = 0.6$}
% 	\end{subfigure}
% 	\caption{10 επαναλήψεις}
% \end{figure}

\end{document}
